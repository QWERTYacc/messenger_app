(this.webpackJsonpmessenger=this.webpackJsonpmessenger||[]).push([[0],{105:function(e,t,a){},110:function(e,t,a){},16:function(e,t,a){e.exports={body:"ProfileCard_body__2QXNj",userPhoto:"ProfileCard_userPhoto__Hka_2",discriptionText:"ProfileCard_discriptionText__Fwqjt",input:"ProfileCard_input__3JDuf"}},18:function(e,t,a){e.exports={body:"DialogsItem_body__SEl4a",userInfo:"DialogsItem_userInfo__2XhTS",userPhoto:"DialogsItem_userPhoto__1wZOk",user_name:"DialogsItem_user_name__3EyqU",newMsgsContainer:"DialogsItem_newMsgsContainer__1yppQ",newMsgs:"DialogsItem_newMsgs__36HlF"}},19:function(e,t,a){e.exports={body:"ContactItem_body__3C_nb",userInfo:"ContactItem_userInfo__3GnzR",userPhoto:"ContactItem_userPhoto__1ZrAL",user_name:"ContactItem_user_name__WFAgm",newMsgsContainer:"ContactItem_newMsgsContainer__1LLPS",newMsgs:"ContactItem_newMsgs__2J5T6"}},204:function(e,t){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),o=a.n(s),r=a(28),c=a.n(r);a(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(29),l=a(4),d="REGISTRATION",u="LOGIN",g="LOGOUT",h={email:"",password:""},p=function(e,t){return{type:u,token:e,id:t}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},e),{},{email:t.email,password:t.password});case u:return Object(l.a)(Object(l.a)({},e),{},{token:t.token,userId:t.id});case g:return Object(l.a)(Object(l.a)({},e),{},{token:null,userId:null});default:return e}},m=a(21),b="GET_NEW_MESSAGES",f={newMessages:{}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(l.a)(Object(l.a)({},e),{},{newMessages:Object(l.a)(Object(l.a)({},e.newMessages),{},Object(m.a)({},t.data.dialogId,t.data))});default:return e}},v="UPLOAD_DIALOGS",x="CHECK_NEW_MESSAGES",_="RELOAD_DIALOGS",N={},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(l.a)(Object(l.a)({},e),{},{dialogs:t.data,isLoad:t.isLoad});case x:return e.dialogs&&e.dialogs.forEach((function(e){t.dialogId===e.dialogId&&(e.newMsgs=t.messages.length,e.lastMsg=t.lastMsg)})),t.messages.length>0?Object(l.a)(Object(l.a)({},e),{},{upDialog:t.dialogId}):Object(l.a)(Object(l.a)({},e),{},{upDialog:""});case _:return Object(l.a)(Object(l.a)({},e),{},{isLoad:!1});default:return e}},y="UPDATE_EMAIL",C="GET_NEW_USER",I="REDIRECT_NEW_USER",S={newContact:{email:""}},P=function(e,t,a){return{type:C,data:e,changed:t,isLoad:a}},D=function(e){return{type:I,redirect:e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{newContact:{email:t.update},changed:t.changed,isLoad:t.isLoad};case C:return null===t.data&&(t.data={email:""}),{newContact:t.data,changed:t.changed,isLoad:t.isLoad};case I:return!1===t.redirect?{newContact:{email:""}}:{newContact:{email:""},redirect:t.redirect};default:return e}},T="ID_DIALOG",B="UPLOAD_DIALOG",k={currentDialog:null},M={dialogId:"",dialog:{messages:[]}},A=function(e){return{type:T,dialogId:e}},E=function(e){return{type:B,dialog:e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return k.currentDialog=t.dialogId,k[t.dialogId]?Object(l.a)(Object(l.a)({},e),{},{dialogId:t.dialogId,dialog:k[t.dialogId],isLoad:!0}):Object(l.a)(Object(l.a)({},e),{},{dialogId:t.dialogId,isLoad:!1});case B:return k[t.dialog.dialogId]=t.dialog,Object(l.a)(Object(l.a)({},e),{},{dialog:k[k.currentDialog],isLoad:!0});default:return e}},F="CHANGE_NEW_MESSAGE",J={newMessage:""},R=function(e){return{type:F,newMessage:e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{newMessage:t.newMessage};default:return e}},q="UPLOAD_CONTACTS",W="RELOAD_CONTACTS",z="CONTACT_CARD",H={isLoad:!1},Q=function(e){return{type:z,contactCard:e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return{contacts:t.data,isLoad:!0};case W:return Object(l.a)(Object(l.a)({},e),{},{isLoad:!1});case z:if(null!==t.contactCard.userBirthday&&void 0!==t.contactCard.userBirthday){var a=t.contactCard.userBirthday.split("");t.contactCard.userBirthday=a.slice(0,10).join("")}return Object(l.a)(Object(l.a)({},e),{},{contactCard:t.contactCard});default:return e}},K="GET_USER_DATA",Y="CHANGE_USER_DATA",V="UPDATE_USER_DATA",Z="RELOAD_USER_DATA",$={id:null,changed:!1,changePage:!1},ee=function(e){return{type:K,userData:e}},te=function(e){return{type:Y,change:e}},ae=function(e,t,a){return{type:V,itemName:e,itemValue:t,disabled:a}},ne=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case K:var n=null;if(null!==a.userData.userBirthday&&void 0!==a.userData.userBirthday){var s=a.userData.userBirthday.split("");n=s.slice(0,10).join("")}return{id:a.userData.id,userPhoto:a.userData.userPhoto,firstName:a.userData.firstName,lastName:a.userData.lastName,email:a.userData.email,userSex:a.userData.userSex,userBirthday:n,changed:!1,changePage:!1};case Y:return Object(l.a)(Object(l.a)({},t),{},{changePage:a.change});case V:return Object(l.a)(Object(l.a)({},t),{},(e={},Object(m.a)(e,a.itemName,a.itemValue),Object(m.a)(e,"changed",!0),e));case Z:return Object(l.a)(Object(l.a)({},t),{},{id:a.id});default:return t}},se="LOG_OUT",oe=Object(i.b)({authPage:j,navBar:O,profilePage:ne,dialogsList:w,searchNewUser:L,dialogPage:U,textArea:G,contactsPage:X}),re=Object(i.c)((function(e,t){return t.type===se&&(e=void 0,localStorage.clear()),oe(e,t)}));window.store=re;var ce=re,ie=a(9),le=a(7),de=(a(110),a(8)),ue=a(22),ge=a.n(ue),he={mainTextColor:"blue-text",mainColor:"blue",navTextColor:"blue-text text-darken-4",accentTextColor:"orange-text text-darken-2",accentColor:"orange darken-2",accentColorFill:"#f57c00"},pe=a(44),je=a.n(pe),me=a(58);var be=function(e){var t=document.querySelectorAll("button"),a=document.querySelectorAll("input"),s=function(t){var a=document.querySelector("#email_inline").value,n=document.querySelector("#password").value;"email"===t.target.name&&(a=t.target.value),"password"===t.target.name&&(n=t.target.value);var s=function(e,t){return{type:d,email:e,password:t}}(a,n);e.dispatch(s)},o=function(n){t.forEach((function(e){return e.disabled=!0})),a.forEach((function(e){return e.disabled=!0})),"register"===n.target.name&&me({method:"post",url:"/api/auth/register",data:e.authState}).then((function(e){je.a.toast({html:"".concat(e.data.message)}),setTimeout((function(){window.location.reload()}),1500)})).catch((function(e){e=JSON.parse(e.request.response),je.a.toast({html:"".concat(e.message)}),setTimeout((function(){window.location.reload()}),1500)})),"login"===n.target.name&&me({method:"post",url:"/api/auth/login",data:e.authState}).then((function(t){!function(t,a){localStorage.setItem("userData",JSON.stringify({token:t,id:a}));var n=p(t,a);e.dispatch(n)}(t.data.token,t.data.userId)})).catch((function(e){console.log(e.request),e=JSON.parse(e.request.response),je.a.toast({html:"".concat(e.message),completeCallback:function(){window.location.reload()}})}))};return""!==e.authState.email||""!==e.authState.password?Object(n.jsx)("div",{className:ge.a.body,children:Object(n.jsxs)("div",{className:ge.a.container,children:[Object(n.jsx)("h3",{className:he.mainTextColor,children:"Log In"}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("input",{type:"email",name:"email",id:"email_inline",onChange:s,className:"validate"}),Object(n.jsx)("label",{htmlFor:"email_inline",children:"Email"})]}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("input",{id:"password",type:"password",className:"validate",name:"password",onChange:s}),Object(n.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(n.jsxs)("div",{className:ge.a.bntsSet,children:[Object(n.jsx)("button",{className:"".concat(he.mainColor," waves-effect waves-light btn"),name:"login",onClick:o,children:"Login"}),Object(n.jsx)("button",{className:"".concat(he.accentColor," waves-effect waves-light btn"),name:"register",onClick:o,children:"Registration"})]})]})}):Object(n.jsx)("div",{className:ge.a.body,children:Object(n.jsxs)("div",{className:ge.a.container,children:[Object(n.jsx)("h3",{className:he.mainTextColor,children:"Log In"}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("input",{type:"email",name:"email",id:"email_inline",onChange:s,className:"validate"}),Object(n.jsx)("label",{htmlFor:"email_inline",children:"Email"})]}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("input",{id:"password",type:"password",className:"validate",name:"password",onChange:s}),Object(n.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(n.jsxs)("div",{className:ge.a.bntsSet,children:[Object(n.jsx)("button",{className:"".concat(he.mainColor," waves-effect waves-light btn disabled"),name:"login",onClick:o,children:"Login"}),Object(n.jsx)("button",{className:"".concat(he.accentColor," waves-effect waves-light btn disabled"),name:"register",onClick:o,children:"Registration"})]})]})})},fe=Object(le.b)((function(e){return{authState:e.authPage}}),(function(e){return{dispatch:function(t){e(t)}}}))(be),Oe=a(91),ve=a.n(Oe),xe=a(92),_e=a.n(xe);var Ne=function(e){var t=0;for(var a in e.navBar.newMessages)e.navBar.newMessages[a].messages.length>0&&t++;var s="noShowItem";return t>0&&(s="showItem"),Object(n.jsx)("nav",{className:he.mainColor,children:Object(n.jsx)("div",{className:"nav-wrapper",children:Object(n.jsxs)("ul",{id:"nav-mobile",className:"".concat(_e.a.body," center"),children:[Object(n.jsx)("li",{children:Object(n.jsx)(ie.b,{to:"/profile",children:"Profile"})}),Object(n.jsx)("li",{children:Object(n.jsxs)(ie.b,{to:"/dialogs",children:["Dialogs",Object(n.jsx)("span",{style:{color:"#FFD073",paddingLeft:"5px"},className:"".concat(s),children:t})]})}),Object(n.jsx)("li",{children:Object(n.jsx)(ie.b,{onClick:function(){var t=Q(!1);e.dispatch(t)},to:"/contacts",children:"Contacts"})})]})})})},we=Object(le.b)((function(e){return{navBar:e.navBar}}),(function(e){return{dispatch:function(t){e(t)}}}))(Ne),ye=a(93),Ce=a.n(ye),Ie=a(61),Se=a.n(Ie),Pe=a(94),De=a(23),Le=a.n(De),Te=a(5),Be=a(16),ke=a.n(Be);var Me=function(e){function t(){var t=te(!0);e.dispatch(t)}function a(){var t={type:se};e.dispatch(t)}function s(){var t=Q(!1);e.dispatch(t);var a=A(e.profile.dialogId);e.dispatch(a)}return Object(n.jsxs)("div",{className:ke.a.body,children:[Object(n.jsx)("div",{className:ke.a.userPhoto,style:{backgroundImage:"url(".concat(e.profile.userPhoto,")")}}),Object(n.jsx)("p",{className:ke.a.discriptionText,children:e.profile.firstName}),Object(n.jsx)("p",{className:ke.a.discriptionText,children:e.profile.lastName}),Object(n.jsx)("p",{className:ke.a.discriptionText,children:e.profile.email}),Object(n.jsx)("p",{className:ke.a.discriptionText,children:e.profile.userSex}),Object(n.jsx)("p",{className:ke.a.discriptionText,children:e.profile.userBirthday}),(o=e.btns,o.map((function(e){return"changeBtn"===e.btnFunc&&(e.btnFunc=t),"logoutBtn"===e.btnFunc&&(e.btnFunc=a),"redirectToDialog"===e.btnFunc&&(e.btnFunc=s),Object(n.jsx)("button",{className:"".concat(he[e.btnStyle]," waves-effect waves-light btn"),name:"change",onClick:e.btnFunc,children:e.btnName},Math.random()*Math.random())})))]});var o};var Ae=function(e){function t(t){var a;a="sex"===t.target.name?ae(t.target.name,t.target.selectedOptions[0].value,!0):ae(t.target.name,t.target.value,!0),e.dispatch(a)}return Object(n.jsxs)("div",{className:ke.a.body,children:[Object(n.jsx)(Te.TextInput,{id:"profileNameInput",label:"First Name",name:"firstName",value:e.profilePage.firstName,onChange:function(e){t(e)}}),Object(n.jsx)(Te.TextInput,{id:"profileLastNameInput",label:"Last Name",name:"lastName",email:!0,value:e.profilePage.lastName,onChange:function(e){t(e)}}),Object(n.jsx)(Te.TextInput,{id:"profileEmailInput",label:"Email",name:"email",value:e.profilePage.email,onChange:function(e){t(e)}}),Object(n.jsxs)(Te.Select,{id:"profileSelect",label:"Sex",name:"userSex",multiple:!1,onChange:function(e){t(e)},defaultValue:e.profilePage.userSex,children:[Object(n.jsx)("option",{disabled:!0,value:"",children:"Check your sex"}),Object(n.jsx)("option",{value:"man",children:"man"}),Object(n.jsx)("option",{value:"woman",children:"woman"})]}),Object(n.jsx)(Te.DatePicker,{id:"profileDatePicker",value:e.profilePage.userBirthday,readOnly:!0,label:"Birthday",name:"userBirthday",onChange:function(){var e=document.querySelector("td.is-selected button"),a=e.dataset.month;(a=Number(a)+1)<10&&(a="0"+a);var n=e.dataset.day;n<10&&(n="0"+Number(n));var s="".concat(e.dataset.year,"-").concat(a,"-").concat(n),o={target:{}};o.target.name="userBirthday",o.target.value=s,t(o)},options:{format:"yyyy-mm-dd",yearRange:99}}),Object(n.jsx)(Te.Button,{id:"saveBtn",className:"blue",disabled:!e.profilePage.changed,onClick:function(){var t={id:e.profilePage.id,firstName:e.profilePage.firstName,lastName:e.profilePage.lastName,email:e.profilePage.email,userBirthday:e.profilePage.userBirthday,userSex:e.profilePage.userSex,changed:!0};At.emit("profileData",t);var a={type:Z,id:null};e.dispatch(a)},children:"Save"})]})};var Ee=function(e){var t=JSON.parse(localStorage.getItem("userData")).id,a={id:t};return At.on("".concat(t,"Profile"),function(){var t=Object(Pe.a)(Se.a.mark((function t(a){var n;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ee(a),e.dispatch(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),null===e.profilePage.id?(At.emit("profileData",a),Object(n.jsx)("div",{className:Le.a.body,children:Object(n.jsx)(Te.Preloader,{})})):!0===e.profilePage.changePage?Object(n.jsx)("div",{className:Le.a.container,children:Object(n.jsxs)("div",{className:Le.a.body,children:[Object(n.jsx)(Te.Button,{className:"".concat(Le.a.closeBtn," grey"),floating:!0,icon:Object(n.jsx)(Te.Icon,{children:"close"}),small:!0,waves:"light",onClick:function(){var t=te(!1);e.dispatch(t)}}),Object(n.jsx)(Ae,{profilePage:e.profilePage,dispatch:e.dispatch})]})}):Object(n.jsx)("div",{className:Le.a.container,children:Object(n.jsx)("div",{className:Le.a.body,children:Object(n.jsx)(Me,{btns:[{btnFunc:"changeBtn",btnStyle:"mainColor",btnName:"Change"},{btnFunc:"logoutBtn",btnStyle:"accentColor",btnName:"Logout"}],profile:e.profilePage,dispatch:e.dispatch})})})},Ue=Object(le.b)((function(e){return{profilePage:e.profilePage}}),(function(e){return{dispatch:function(t){e(t)}}}))(Ee),Fe=a(95),Je=a.n(Fe),Re=a(18),Ge=a.n(Re);var qe=function(e){var t="noShowItem";return e.data.newMsgs&&e.data.newMsgs>0&&(t="showItem"),Object(n.jsxs)("div",{className:Ge.a.body,children:[Object(n.jsxs)("div",{className:Ge.a.userInfo,children:[Object(n.jsx)("div",{className:Ge.a.userPhoto,style:{backgroundImage:"url(".concat(e.data.photo,")")}}),Object(n.jsx)("div",{className:"".concat(Ge.a.user_name," ").concat(he.navTextColor),children:e.data.name}),Object(n.jsx)("div",{className:"".concat(Ge.a.user_name," ").concat(he.navTextColor),children:e.data.lastName})]}),Object(n.jsx)("div",{className:Ge.a.newMsgsContainer,children:Object(n.jsx)("div",{className:"".concat(t," ").concat(Ge.a.newMsgs," ").concat(he.accentTextColor),children:e.data.newMsgs})})]})},We=a(31),ze=a.n(We);var He=function(e){return Object(n.jsxs)("svg",{className:"icon-add",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"layer_1",x:"0px",y:"0px",viewBox:"0 0 150 150",enableBackground:"new 0 0 150 150",xmlSpace:"preserve",width:e.width,fill:e.fill,children:[Object(n.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M112.5,72.5h-35v-35c0-1.4-1.1-2.5-2.5-2.5l0,0c-1.4,0-2.5,1.1-2.5,2.5v35h-35c-1.4,0-2.5,1.1-2.5,2.5l0,0  c0,1.4,1.1,2.5,2.5,2.5h35v35c0,1.4,1.1,2.5,2.5,2.5l0,0c1.4,0,2.5-1.1,2.5-2.5v-35h35c1.4,0,2.5-1.1,2.5-2.5l0,0  C115,73.6,113.9,72.5,112.5,72.5z"}),Object(n.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M75.8,141.8c-37.5,0-68-30.5-68-68s30.5-68,68-68s68,30.5,68,68S113.3,141.8,75.8,141.8z M75.8,10.8c-34.7,0-63,28.3-63,63  s28.3,63,63,63s63-28.3,63-63S110.6,10.8,75.8,10.8z"})]})},Qe=function(e,t,a){if(void 0!==e){if(""!==t){var s=[];e.forEach((function(e){e.lastMsg&&s.push(e.lastMsg)})),s.sort((function(e,t){return e-t})),s.forEach((function(t){e.find((function(e,a,n){return e.lastMsg===t&&(n.splice(a,1),n.unshift(e)),this}))}))}return e.map((function(e){return Object(n.jsx)(ie.b,{exact:!0,to:"/dialogs/dialog/".concat(e.dialogId),onClick:function(){var t=A(e.dialogId);a(t)},children:Object(n.jsx)(qe,{data:e})},e.dialogId)}))}};var Xe=function(e){if(!e.dialogsList.isLoad){At.emit("dialogList",JSON.parse(localStorage.getItem("userData")).id);var t=JSON.parse(localStorage.getItem("userData")).id,a=0;return void 0!==e.dialogsList.dialogs&&(a=e.dialogsList.dialogs.length),At.emit("updateDialogsList",t,a),At.on("updateDialogsList".concat(t),(function(t){var a=function(e,t){return{type:v,isLoad:e,data:t}}(!0,t);e.dispatch(a)})),Object(n.jsx)("div",{className:ze.a.preloaderContainer,children:Object(n.jsx)(Te.Preloader,{})})}if(0===e.dialogsList.dialogs.length)return Object(n.jsxs)("div",{className:ze.a.preloaderContainer,children:[Object(n.jsx)("h5",{children:"no dialogs"}),Object(n.jsx)(ie.b,{exact:!0,to:"/dialogs/add_new_user",children:Object(n.jsx)(He,{width:"50px",fill:he.accentColorFill})})]});var s="";return e.dialogsList.upDialog&&(s=e.dialogsList.upDialog),Object(n.jsxs)("div",{className:ze.a.body,children:[Object(n.jsx)("div",{className:ze.a.content,children:Qe(e.dialogsList.dialogs,s,e.dispatch)}),Object(n.jsx)(ie.b,{exact:!0,to:"/dialogs/add_new_user",children:Object(n.jsx)(He,{width:"50px",fill:he.accentColorFill})})]})},Ke=Object(le.b)((function(e){return{dialogsList:e.dialogsList}}),(function(e){return{dispatch:function(t){e(t)}}}))(Xe),Ye=a(40),Ve=a(41),Ze=a(43),$e=a(42),et=a(45),tt=a.n(et),at=function(e,t,a,n){e(function(e,t,a){return{type:y,update:e,changed:t,isLoad:a}}(t,a,n))},nt=function(e){Object(Ze.a)(a,e);var t=Object($e.a)(a);function a(){return Object(Ye.a)(this,a),t.apply(this,arguments)}return Object(Ve.a)(a,[{key:"render",value:function(){var e=this;if(this.props.searchNewUser.redirect){var t=A(this.props.searchNewUser.redirect);return this.props.dispatch(t),Object(n.jsx)(de.a,{to:"/dialogs/dialog/".concat(this.props.searchNewUser.redirect)})}var a,s,o=function(e){return""===e?Object(n.jsx)("div",{className:"noShowItem",children:e}):Object(n.jsx)("div",{className:"displayBlock",children:e})},r="noShowItem",c=!1;return"loading"===this.props.searchNewUser.isLoad&&(r="displayBlock",c=!0,a=Object(n.jsx)(Te.Preloader,{})),!0===this.props.searchNewUser.isLoad&&""===this.props.searchNewUser.newContact.email&&(r="displayBlock",a=Object(n.jsx)(Te.Card,{actions:[Object(n.jsx)(Te.Button,{small:!0,style:{marginTop:0},className:he.mainColor,onClick:function(){return at(e.props.dispatch,"",!1,!1)},children:"Close"},"close")],children:"User is not found"})),this.props.searchNewUser.isLoad&&""!==this.props.searchNewUser.newContact.email&&(r="displayBlock",a=Object(n.jsxs)(Te.Card,{style:{maxWidth:"300px"},actions:[Object(n.jsx)(Te.Button,{small:!0,style:{marginTop:0},className:he.mainColor,onClick:function(){return at(e.props.dispatch,"",!1,!1)},children:"Close"},"close"),(s=this.props.searchNewUser.newContact.isContact,s?Object(n.jsx)(Te.Button,{small:!0,style:{marginTop:0,marginLeft:"30px"},className:he.accentColor,onClick:function(){var t=D(e.props.searchNewUser.newContact.dialogId);e.props.dispatch(t)},children:"Go to dialog"},"goToDialog"):Object(n.jsx)(Te.Button,{small:!0,style:{marginTop:0,marginLeft:"30px"},className:he.accentColor,onClick:function(){At.emit("addNewContact",{userId:JSON.parse(localStorage.getItem("userData")).id,newContactId:e.props.searchNewUser.newContact.id}),at(e.props.dispatch,"",!1,"loading")},children:"Save"},"save"))],header:Object(n.jsx)(Te.CardTitle,{style:{width:"100%"},image:this.props.searchNewUser.newContact.userPhoto}),children:[o(this.props.searchNewUser.newContact.firstName),o(this.props.searchNewUser.newContact.lastName),this.props.searchNewUser.newContact.email]})),Object(n.jsx)("div",{className:tt.a.body,children:Object(n.jsxs)("div",{className:tt.a.container,children:[Object(n.jsx)("h5",{className:he.navTextColor,style:{marginBottom:"30px"},children:"To search for a user enter his (her) e-mail"}),Object(n.jsx)(Te.TextInput,{id:"searchNewUserEmailInput",label:"Email",name:"email",value:this.props.searchNewUser.newContact.email,disabled:c,onChange:function(t){var a=!0;""===t.target.value&&(a=!1),at(e.props.dispatch,t.target.value,a,!1)}}),Object(n.jsx)(Te.Button,{id:"searchBtn",className:"blue",disabled:!this.props.searchNewUser.changed,onClick:function(){At.emit("findUser",{userId:JSON.parse(localStorage.getItem("userData")).id,contactEmail:e.props.searchNewUser.newContact.email}),at(e.props.dispatch,"",!1);var t=P({email:""},!1,"loading");e.props.dispatch(t)},children:"Search"}),Object(n.jsx)("div",{className:"".concat(tt.a.searchResult," ").concat(r),children:a})]})})}},{key:"componentWillUnmount",value:function(){var e=D(!1);this.props.dispatch(e)}}]),a}(o.a.Component),st=Object(le.b)((function(e){return{searchNewUser:e.searchNewUser}}),(function(e){return{dispatch:function(t){e(t)}}}))(nt);var ot=function(e){return At.on("newContact",(function(t){var a=P(t,!1,!0);e.dispatch(a)})),Object(n.jsx)(st,{})},rt=a(96),ct=a.n(rt),it=a(46),lt=a.n(it),dt=a(24),ut=a.n(dt);var gt=function(e){var t,a;return t=""!==e.user.firstName?e.user.firstName:e.user.email,e.user.id===JSON.parse(localStorage.getItem("userData")).id&&(a=ut.a.fromUser,t="You"),e.user.id!==JSON.parse(localStorage.getItem("userData")).id&&(a=ut.a.fromInterlocutor),"system_message"===e.description&&(a=ut.a.fromSystem),Object(n.jsxs)("div",{className:"".concat(ut.a.body," ").concat(a),children:[Object(n.jsx)("div",{className:"".concat(ut.a.sender," ").concat(he.navTextColor),children:t}),Object(n.jsx)("div",{className:ut.a.messageBody,children:e.messageBody})]})};function ht(e){if(e.isLoad){var t=[];return e.dialog.messages.map((function(a){return a.to===e.dialog.user1.id?t.push(Object(n.jsx)(gt,{to:a.to,messageBody:a.messageBody,user:e.dialog.user2,creation:a.creation,description:a.description},Math.random())):t.push(Object(n.jsx)(gt,{to:a.to,messageBody:a.messageBody,user:e.dialog.user1,creation:a.creation,description:a.description},Math.random()))})),t}}var pt=function(e){Object(Ze.a)(a,e);var t=Object($e.a)(a);function a(){return Object(Ye.a)(this,a),t.apply(this,arguments)}return Object(Ve.a)(a,[{key:"render",value:function(){if(!this.props.dialogPage.isLoad)return At.emit("uploadDialog",{dialogId:this.props.dialogPage.dialogId,getDialog:!0}),Object(n.jsx)("div",{className:lt.a.preloaderContainer,children:Object(n.jsx)(Te.Preloader,{})});var e=JSON.parse(localStorage.getItem("userData")).id,t=[];return this.props.dialogPage.dialog.messages.length>0&&this.props.dialogPage.dialog.messages.map((function(a){return a.to!==e||a.delivered||t.push(a._id),a})),t.length>0&&At.emit("uploadDialog",{dialogId:this.props.dialogPage.dialogId,userId:e,newDeliveredMessagesIdArr:t}),Object(n.jsx)("div",{className:lt.a.body,id:"dialogArea",children:Object(n.jsx)("div",{className:lt.a.content,onScroll:function(e){console.log(e)},children:ht(this.props.dialogPage)})})}},{key:"componentDidMount",value:function(){if(this.props.dialogPage.isLoad&&this.props.dialogPage.dialog.messages&&this.props.dialogPage.dialog.messages.length>0){var e=document.querySelector("#dialogArea");e.scrollTop=e.scrollHeight}}},{key:"componentDidUpdate",value:function(){var e=document.querySelector("#dialogArea");e.scrollTop=e.scrollHeight}},{key:"componentWillUnmount",value:function(){k.currentDialog=null;var e=A("");this.props.dispatch(e)}}]),a}(o.a.Component),jt=Object(le.b)((function(e){return{dialogPage:e.dialogPage}}),(function(e){return{dispatch:function(t){e(t)}}}))(pt),mt=a(97),bt=a.n(mt);var ft=function(e){var t,a=JSON.parse(localStorage.getItem("userData")).id;e.dialog&&e.dialog.user1&&(t=e.dialog.user1.id!==a?e.dialog.user1.id:e.dialog.user2.id);var s=!0;return""!==e.textArea.newMessage&&(s=!1),Object(n.jsxs)("div",{className:"".concat(bt.a.body," ").concat(he.mainColor),children:[Object(n.jsx)(Te.Textarea,{className:"white",value:e.textArea.newMessage,onChange:function(t){var a=R(t.target.value);e.dispatch(a)}}),Object(n.jsx)(Te.Button,{className:he.accentColor,node:"button",type:"submit",waves:"light",disabled:s,onClick:function(){At.emit("uploadDialog",{dialogId:e.dialog.dialogId,user:a,interlocutor:t,messageBody:e.textArea.newMessage,creation:Date.now()});var n=R("");e.dispatch(n)},children:Object(n.jsx)(Te.Icon,{children:"send"})})]})},Ot=Object(le.b)((function(e){return{textArea:e.textArea,dialog:e.dialogPage.dialog}}),(function(e){return{dispatch:function(t){e(t)}}}))(ft);var vt=function(){return Object(n.jsxs)("div",{className:ct.a.body,children:[Object(n.jsx)(Ot,{}),Object(n.jsx)(jt,{})]})};var xt=function(e){return Object(n.jsxs)("div",{className:Je.a.body,children:[Object(n.jsx)(de.b,{exact:!0,path:"/dialogs",render:function(){return Object(n.jsx)(Ke,{})}}),Object(n.jsx)(de.b,{path:"/dialogs/dialog",render:function(){return Object(n.jsx)(vt,{})}}),Object(n.jsx)(de.b,{path:"/dialogs/add_new_user",render:function(){return Object(n.jsx)(ot,{dispatch:e.dispatch})}})]})},_t=a(27),Nt=a.n(_t),wt=a(19),yt=a.n(wt);var Ct=function(e){var t,a;return""===e.data.firstName?(t=e.data.email,a=""):(t=e.data.firstName,a=e.data.lastName),Object(n.jsxs)("div",{className:yt.a.body,children:[Object(n.jsxs)("div",{className:yt.a.userInfo,children:[Object(n.jsx)("div",{className:yt.a.userPhoto,style:{backgroundImage:"url(".concat(e.data.userPhoto,")")}}),Object(n.jsx)("div",{className:"".concat(yt.a.user_name," ").concat(he.navTextColor),children:t}),Object(n.jsx)("div",{className:"".concat(yt.a.user_name," ").concat(he.navTextColor),children:a})]}),Object(n.jsx)("div",{className:yt.a.newMsgsContainer,children:Object(n.jsx)("div",{className:"".concat("noShowItem"," ").concat(yt.a.newMsgs," ").concat(he.accentTextColor),children:e.data.newMsgs})})]})},It=function(e,t){var a=[],s=[];e.forEach((function(e){""!==e.firstName?s.push(e.firstName):a.push(e.email)})),a.sort(),s.sort();var o=a.map((function(t){return e.forEach((function(e){e.email===t&&(t=e)})),t})),r=s.map((function(t){return e.forEach((function(e){e.firstName===t&&(t=e)})),t}));return[].concat(o,r).map((function(e){return Object(n.jsx)(ie.b,{exact:!0,to:"/contacts/contact/".concat(e.id),onClick:function(){var a=Q(e);t(a)},children:Object(n.jsx)(Ct,{data:e})},e.id)}))};var St=function(e){return e.contactsPage.isLoad?0===e.contactsPage.contacts.length?Object(n.jsx)("div",{className:Nt.a.preloaderContainer,children:Object(n.jsx)("h5",{children:"no contacts"})}):e.contactsPage.contactCard?Object(n.jsx)("div",{className:Nt.a.preloaderContainer,children:Object(n.jsx)(Me,{btns:[{btnFunc:"redirectToDialog",btnStyle:"accentColor",btnName:"Go to dialog"}],profile:e.contactsPage.contactCard,dispatch:e.dispatch})}):Object(n.jsx)("div",{className:Nt.a.body,children:Object(n.jsx)("div",{className:Nt.a.content,children:It(e.contactsPage.contacts,e.dispatch)})}):(At.emit("uploadContacts",{userId:JSON.parse(localStorage.getItem("userData")).id}),Object(n.jsx)("div",{className:Nt.a.preloaderContainer,children:Object(n.jsx)(Te.Preloader,{})}))},Pt=Object(le.b)((function(e){return{contactsPage:e.contactsPage}}),(function(e){return{dispatch:function(t){e(t)}}}))(St),Dt=a(98),Lt=a.n(Dt);var Tt=function(e){return At.on("uploadContacts",(function(t){var a=function(e){return{type:q,data:e}}(t.contactsArr);e.dispatch(a)})),Object(n.jsx)("div",{className:Lt.a.body,children:Object(n.jsx)(de.b,{path:"/contacts",render:function(){return Object(n.jsx)(Pt,{})}})})};var Bt=function(e){var t,a=JSON.parse(localStorage.getItem("userData")).id;return At.emit("isOnline",{userId:a,isDialogsLoad:e.isDialogsLoad}),Object(n.jsxs)("div",{className:Ce.a.body,children:[Object(n.jsx)(de.b,{path:"/profile",render:function(){return Object(n.jsx)(Ue,{})}}),Object(n.jsx)(de.b,{path:"/dialogs",render:function(){return Object(n.jsx)(xt,{dispatch:e.dispatch})}}),Object(n.jsx)(de.b,{path:"/contacts",render:function(){return Object(n.jsx)(Tt,{dispatch:e.dispatch})}}),(t=e.dialogId,""!==t&&void 0!==t?Object(n.jsx)(de.a,{to:"/dialogs/dialog/".concat(t)}):null)]})},kt=Object(le.b)((function(e){return{dialogId:e.dialogPage.dialogId,isDialogsLoad:e.dialogsList.isLoad}}),(function(e){return{dispatch:function(t){e(t)}}}))(Bt),Mt=a(99),At=a.n(Mt).a.connect("http://localhost:5000");var Et=function(e){var t=JSON.parse(localStorage.getItem("userData")).id;return At.on("getDialog",(function(t){var a=E(t);e.dispatch(a)})),At.on("newMessageTo".concat(t),(function(a){var n=E(a);e.dispatch(n);var s=[];a.dialogId!==k.currentDialog&&a.messages.map((function(e){return e.delivered||e.to!==t||s.push(e),e}));var o={dialogId:a.dialogId,messages:s,lastMsg:a.messages[a.messages.length-1].creation},r=function(e){return{type:b,data:e}}(o);e.dispatch(r);var c={type:x,dialogId:o.dialogId,messages:o.messages,lastMsg:o.lastMsg};e.dispatch(c)})),At.on("addNewContact".concat(t),(function(a){var n={type:W};if(e.dispatch(n),At.emit("updateDialogsList",JSON.parse(localStorage.getItem("userData")).id),a.initiator===t){var s=D(a.newContact.dialogId);e.dispatch(s)}if(a.initiator!==t){var o={type:_};e.dispatch(o)}})),Object(n.jsxs)("div",{className:ve.a.body,children:[Object(n.jsx)(we,{}),Object(n.jsx)(kt,{})]})},Ut=Object(le.b)((function(e){return{}}),(function(e){return{dispatch:function(t){e(t)}}}))(Et);var Ft=function(e){var t=!!e.authState.token;if(void 0!==localStorage.userData&&!1===t){var a=JSON.parse(localStorage.userData),s=p(a.token,a.id);e.dispatch(s)}var o=function(e){return e?Object(n.jsxs)(de.d,{children:[Object(n.jsx)(de.b,{path:"/profile",render:function(){return Object(n.jsx)(Ut,{})}}),Object(n.jsx)(de.b,{path:"/dialogs",render:function(){return Object(n.jsx)(Ut,{})}}),Object(n.jsx)(de.b,{path:"/contacts",render:function(){return Object(n.jsx)(Ut,{})}}),Object(n.jsx)(de.a,{to:"/dialogs"})]}):Object(n.jsxs)(de.d,{children:[Object(n.jsx)(de.b,{exact:!0,path:"/",render:function(){return Object(n.jsx)(fe,{})}}),Object(n.jsx)(de.a,{to:"/"})]})}(t);return Object(n.jsx)("div",{className:"App",children:o})},Jt=Object(le.b)((function(e){return{authState:e.authPage}}),(function(e){return{dispatch:function(t){e(t)}}}))(Ft);c.a.render(Object(n.jsx)(ie.a,{children:Object(n.jsx)(le.a,{store:ce,children:Object(n.jsx)(Jt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},22:function(e,t,a){e.exports={body:"AuthPage_body__UKA5d",container:"AuthPage_container__1ErkF",bntsSet:"AuthPage_bntsSet__2qiu5"}},23:function(e,t,a){e.exports={container:"ProfilePage_container__2YxQl",body:"ProfilePage_body__pUQNv",closeBtn:"ProfilePage_closeBtn__X-Ux8"}},24:function(e,t,a){e.exports={body:"MessageItem_body__2DKle",sender:"MessageItem_sender__3lgnW",fromUser:"MessageItem_fromUser__3uPRb",fromInterlocutor:"MessageItem_fromInterlocutor__1O6cK",messageBody:"MessageItem_messageBody__1vPRc",fromSystem:"MessageItem_fromSystem__3QYG6"}},27:function(e,t,a){e.exports={body:"ContactsList_body__ji0bU",content:"ContactsList_content__2otnV",preloaderContainer:"ContactsList_preloaderContainer__wJLwh"}},31:function(e,t,a){e.exports={body:"DialogsList_body__o4bAz",content:"DialogsList_content__UFbrw",preloaderContainer:"DialogsList_preloaderContainer__1KmdS"}},45:function(e,t,a){e.exports={body:"SearchNewUser_body__3qZak",container:"SearchNewUser_container__3YEpz",searchResult:"SearchNewUser_searchResult__2vN1J"}},46:function(e,t,a){e.exports={body:"DialogBody_body__1ISCj",content:"DialogBody_content__2JXWN",preloaderContainer:"DialogBody_preloaderContainer__Qi1LQ"}},91:function(e,t,a){e.exports={body:"WorkPlace_body__2tSNu"}},92:function(e,t,a){e.exports={body:"Navbar_body__czvJ0"}},93:function(e,t,a){e.exports={body:"AppPages_body__2zqND"}},95:function(e,t,a){e.exports={body:"DialogsPage_body__1Btte"}},96:function(e,t,a){e.exports={body:"Dialog_body__1o6qv",preloaderContainer:"Dialog_preloaderContainer__3ej52"}},97:function(e,t,a){e.exports={body:"TextArea_body__Se-37"}},98:function(e,t,a){e.exports={body:"ContactsPage_body__370XY"}}},[[209,1,2]]]);
//# sourceMappingURL=main.1abbd0d6.chunk.js.map